<!DOCTYPE html>
<html lang="de"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>IKL</title>

    <!-- Bootstrap -->
    <link rel='stylesheet' href='/webjars/bootstrap/css/bootstrap.min.css'>

    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="css/welcome.css">
</head>
<body>
    <div id="container">
        <div id="slideshow">
            <img id="slideA" class="slide animate-left" th:src="@{/assets/fallback.jpg}"/>
            <img id="slideB" class="slide animate-left" th:src="@{/assets/fallback.jpg}" style="display: none;"/>
        </div>

        <div id="news" class="jumbotron">
            <h1 class="display-4">Hello, world!</h1>
            <p class="lead">This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>
            <hr class="my-4">
            <p>It uses utility classes for typography and spacing to space content out within the larger container.</p>
        </div>
    </div>
</body>

<script type="text/javascript">
    var currentSlide = "A";
    var displayedSlide = document.getElementById("slideA");
    var hiddenSlide = document.getElementById("slideB");

    function getNextImage() {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() {
            var nextImage = xmlHttp.responseText;
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200 && nextImage != null && nextImage !== "") {
                hiddenSlide.setAttribute("src", "/images/" + nextImage);
            }
            else {
                hiddenSlide.setAttribute("src", "/assets/fallback.jpg");
            }
        };
        xmlHttp.open("GET", "/nextimage", true); // true for asynchronous
        xmlHttp.send(null);
    }

    function displayNextSlide() {
        if (currentSlide == "A") {
            hiddenSlide = document.getElementById("slideA");
            displayedSlide = document.getElementById("slideB");

            currentSlide = "B";
        }
        else {
            hiddenSlide = document.getElementById("slideB");
            displayedSlide = document.getElementById("slideA");

            currentSlide = "A"
        }

        // Hide previous slide
        hiddenSlide.style.display = "none";
        // Show the other slide
        displayedSlide.style.display = "inline";
        // Update image for hidden slide
        getNextImage();
    }

    displayNextSlide();
    setInterval(displayNextSlide, 4000);

</script>
</html>